eca2671a5e429d1aa7b8745b3b8a056b
"use strict";
/**
 * Basic Demo Test
 *
 * This test demonstrates that our test infrastructure is working
 * and tests basic TypeScript functionality.
 */
Object.defineProperty(exports, "__esModule", { value: true });
describe('Basic Test Infrastructure', () => {
    describe('Environment Setup', () => {
        it('should have test environment configured', () => {
            expect(process.env.NODE_ENV).toBe('test');
            expect(process.env.METRO_TEST_MODE).toBe('true');
            expect(typeof process.env.BUILD_HISTORY_PATH).toBe('string');
        });
        it('should have deterministic test utilities', () => {
            // Test basic functionality
            const testString = 'Hello, World!';
            expect(testString).toContain('World');
            expect(testString.length).toBeGreaterThan(0);
        });
        it('should have mock date functionality', () => {
            // Test that Date.now() returns a consistent value in tests
            const now1 = Date.now();
            const now2 = Date.now();
            expect(now1).toBe(now2); // Should be same due to mocking
        });
        it('should support async operations', async () => {
            const asyncOperation = async () => {
                return new Promise((resolve) => {
                    setTimeout(() => resolve('async result'), 10);
                });
            };
            const result = await asyncOperation();
            expect(result).toBe('async result');
        });
    });
    describe('Test Utilities', () => {
        it('should have basic matchers available', () => {
            expect(true).toBeTruthy();
            expect(false).toBeFalsy();
            expect([1, 2, 3]).toHaveLength(3);
            expect({ name: 'test' }).toHaveProperty('name');
        });
        it('should handle error testing', () => {
            const throwError = () => {
                throw new Error('Test error');
            };
            expect(throwError).toThrow('Test error');
            expect(throwError).toThrow(Error);
        });
        it('should support numeric ranges', () => {
            const value = 42;
            expect(value).toBeGreaterThan(40);
            expect(value).toBeLessThan(50);
            expect(value).toBeGreaterThanOrEqual(42);
            expect(value).toBeLessThanOrEqual(42);
        });
        it('should handle arrays and objects', () => {
            const testArray = [1, 2, 3, 4, 5];
            const testObject = { name: 'Test', active: true, count: 5 };
            expect(testArray).toContain(3);
            expect(testArray).toEqual(expect.arrayContaining([1, 2, 3]));
            expect(testObject).toMatchObject({ name: 'Test' });
            expect(testObject).toHaveProperty('count', 5);
        });
    });
    describe('Performance and Memory', () => {
        it('should complete within reasonable time', () => {
            const start = Date.now();
            // Simulate some work
            for (let i = 0; i < 1000; i++) {
                Math.sqrt(i);
            }
            const duration = Date.now() - start;
            expect(duration).toBeLessThan(100); // Should complete in less than 100ms
        });
        it('should handle memory allocation', () => {
            const largeArray = new Array(10000).fill(0).map((_, i) => ({ id: i, value: i * 2 }));
            expect(largeArray).toHaveLength(10000);
            expect(largeArray[5000]).toEqual({ id: 5000, value: 10000 });
            // Clean up
            largeArray.length = 0;
        });
    });
    describe('Mock and Spy Support', () => {
        it('should support Jest mocks', () => {
            const mockFunction = jest.fn();
            mockFunction('test argument');
            expect(mockFunction).toHaveBeenCalled();
            expect(mockFunction).toHaveBeenCalledWith('test argument');
            expect(mockFunction).toHaveBeenCalledTimes(1);
        });
        it('should support spying on objects', () => {
            const testObject = {
                getValue: () => 'original',
                setValue: (value) => value
            };
            const spy = jest.spyOn(testObject, 'getValue');
            spy.mockReturnValue('mocked');
            expect(testObject.getValue()).toBe('mocked');
            expect(spy).toHaveBeenCalled();
            spy.mockRestore();
            expect(testObject.getValue()).toBe('original');
        });
        it('should support mock implementations', () => {
            const mockCallback = jest.fn();
            mockCallback.mockImplementation((name) => `Hello, ${name}!`);
            const result = mockCallback('World');
            expect(result).toBe('Hello, World!');
            expect(mockCallback).toHaveBeenCalledWith('World');
        });
    });
    describe('TypeScript Features', () => {
        it('should work with TypeScript interfaces', () => {
            const testData = {
                name: 'Test Item',
                value: 100
            };
            expect(testData.name).toBe('Test Item');
            expect(testData.value).toBe(100);
            expect(testData.active).toBeUndefined();
        });
        it('should work with generics', () => {
            const createArray = (items) => {
                return [...items];
            };
            const numberArray = createArray([1, 2, 3]);
            const stringArray = createArray(['a', 'b', 'c']);
            expect(numberArray).toEqual([1, 2, 3]);
            expect(stringArray).toEqual(['a', 'b', 'c']);
        });
        it('should work with type guards', () => {
            const isString = (value) => {
                return typeof value === 'string';
            };
            expect(isString('test')).toBe(true);
            expect(isString(123)).toBe(false);
            expect(isString(null)).toBe(false);
        });
    });
});
// Test the test hygiene utilities
describe('Test Hygiene Integration', () => {
    it('should provide deterministic random data', () => {
        // Since we've mocked Math.random with a seed, this should be deterministic
        const random1 = Math.random();
        const random2 = Math.random();
        // Values should be different but deterministic across test runs
        expect(random1).not.toBe(random2);
        expect(typeof random1).toBe('number');
        expect(typeof random2).toBe('number');
    });
    it('should have consistent timestamps', () => {
        const time1 = Date.now();
        // Advance time by 1000ms using our utility
        // Note: advanceTime function would need to be imported from test-hygiene
        const time2 = Date.now();
        // Due to our mocking, times should be consistent
        expect(time1).toBe(time2);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxLZW50aFxcRGVza3RvcFxcZWNob3RyYWlsLXByb2plY3RcXGVjaG90cmFpbFxcYXBwc1xcbW9iaWxlXFxzcmNcXF9fdGVzdHNfX1xcYmFzaWNcXGRlbW8udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7O0FBRUgsUUFBUSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUN6QyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQ2pDLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCwyQkFBMkI7WUFDM0IsTUFBTSxVQUFVLEdBQUcsZUFBZSxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLDJEQUEyRDtZQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDeEIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sQ0FBQyxJQUFJ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QUFDO1FBQzlCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUU5QixnRUFBZ0U7UUFDaEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEMsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN4QyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7UUFDM0MsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLDJDQUEyQztRQUMzQyx5RUFBeUU7UUFDekUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRXpCLGlEQUFpRDtRQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxLZW50aFxcRGVza3RvcFxcZWNob3RyYWlsLXByb2plY3RcXGVjaG90cmFpbFxcYXBwc1xcbW9iaWxlXFxzcmNcXF9fdGVzdHNfX1xcYmFzaWNcXGRlbW8udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQmFzaWMgRGVtbyBUZXN0XHJcbiAqIFxyXG4gKiBUaGlzIHRlc3QgZGVtb25zdHJhdGVzIHRoYXQgb3VyIHRlc3QgaW5mcmFzdHJ1Y3R1cmUgaXMgd29ya2luZ1xyXG4gKiBhbmQgdGVzdHMgYmFzaWMgVHlwZVNjcmlwdCBmdW5jdGlvbmFsaXR5LlxyXG4gKi9cclxuXHJcbmRlc2NyaWJlKCdCYXNpYyBUZXN0IEluZnJhc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdFbnZpcm9ubWVudCBTZXR1cCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGF2ZSB0ZXN0IGVudmlyb25tZW50IGNvbmZpZ3VyZWQnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChwcm9jZXNzLmVudi5OT0RFX0VOVikudG9CZSgndGVzdCcpO1xyXG4gICAgICBleHBlY3QocHJvY2Vzcy5lbnYuTUVUUk9fVEVTVF9NT0RFKS50b0JlKCd0cnVlJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcHJvY2Vzcy5lbnYuQlVJTERfSElTVE9SWV9QQVRIKS50b0JlKCdzdHJpbmcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHRlc3QgdXRpbGl0aWVzJywgKCkgPT4ge1xyXG4gICAgICAvLyBUZXN0IGJhc2ljIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgY29uc3QgdGVzdFN0cmluZyA9ICdIZWxsbywgV29ybGQhJztcclxuICAgICAgZXhwZWN0KHRlc3RTdHJpbmcpLnRvQ29udGFpbignV29ybGQnKTtcclxuICAgICAgZXhwZWN0KHRlc3RTdHJpbmcubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgbW9jayBkYXRlIGZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XHJcbiAgICAgIC8vIFRlc3QgdGhhdCBEYXRlLm5vdygpIHJldHVybnMgYSBjb25zaXN0ZW50IHZhbHVlIGluIHRlc3RzXHJcbiAgICAgIGNvbnN0IG5vdzEgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCBub3cyID0gRGF0ZS5ub3coKTtcclxuICAgICAgZXhwZWN0KG5vdzEpLnRvQmUobm93Mik7IC8vIFNob3VsZCBiZSBzYW1lIGR1ZSB0byBtb2NraW5nXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgYXN5bmMgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYXN5bmNPcGVyYXRpb24gPSBhc3luYyAoKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgnYXN5bmMgcmVzdWx0JyksIDEwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFzeW5jT3BlcmF0aW9uKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2FzeW5jIHJlc3VsdCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdUZXN0IFV0aWxpdGllcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGF2ZSBiYXNpYyBtYXRjaGVycyBhdmFpbGFibGUnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCh0cnVlKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGV4cGVjdChmYWxzZSkudG9CZUZhbHN5KCk7XHJcbiAgICAgIGV4cGVjdChbMSwgMiwgM10pLnRvSGF2ZUxlbmd0aCgzKTtcclxuICAgICAgZXhwZWN0KHsgbmFtZTogJ3Rlc3QnIH0pLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcnJvciB0ZXN0aW5nJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0aHJvd0Vycm9yID0gKCkgPT4ge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVzdCBlcnJvcicpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZXhwZWN0KHRocm93RXJyb3IpLnRvVGhyb3coJ1Rlc3QgZXJyb3InKTtcclxuICAgICAgZXhwZWN0KHRocm93RXJyb3IpLnRvVGhyb3coRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IG51bWVyaWMgcmFuZ2VzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IDQyO1xyXG4gICAgICBleHBlY3QodmFsdWUpLnRvQmVHcmVhdGVyVGhhbig0MCk7XHJcbiAgICAgIGV4cGVjdCh2YWx1ZSkudG9CZUxlc3NUaGFuKDUwKTtcclxuICAgICAgZXhwZWN0KHZhbHVlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDQyKTtcclxuICAgICAgZXhwZWN0KHZhbHVlKS50b0JlTGVzc1RoYW5PckVxdWFsKDQyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFycmF5cyBhbmQgb2JqZWN0cycsICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdEFycmF5ID0gWzEsIDIsIDMsIDQsIDVdO1xyXG4gICAgICBjb25zdCB0ZXN0T2JqZWN0ID0geyBuYW1lOiAnVGVzdCcsIGFjdGl2ZTogdHJ1ZSwgY291bnQ6IDUgfTtcclxuXHJcbiAgICAgIGV4cGVjdCh0ZXN0QXJyYXkpLnRvQ29udGFpbigzKTtcclxuICAgICAgZXhwZWN0KHRlc3RBcnJheSkudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKFsxLCAyLCAzXSkpO1xyXG5cclxuICAgICAgZXhwZWN0KHRlc3RPYmplY3QpLnRvTWF0Y2hPYmplY3QoeyBuYW1lOiAnVGVzdCcgfSk7XHJcbiAgICAgIGV4cGVjdCh0ZXN0T2JqZWN0KS50b0hhdmVQcm9wZXJ0eSgnY291bnQnLCA1KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIE1lbW9yeScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY29tcGxldGUgd2l0aGluIHJlYXNvbmFibGUgdGltZScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2ltdWxhdGUgc29tZSB3b3JrXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwMDsgaSsrKSB7XHJcbiAgICAgICAgTWF0aC5zcXJ0KGkpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcclxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIGluIGxlc3MgdGhhbiAxMDBtc1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWVtb3J5IGFsbG9jYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhcmdlQXJyYXkgPSBuZXcgQXJyYXkoMTAwMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiAoeyBpZDogaSwgdmFsdWU6IGkgKiAyIH0pKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChsYXJnZUFycmF5KS50b0hhdmVMZW5ndGgoMTAwMDApO1xyXG4gICAgICBleHBlY3QobGFyZ2VBcnJheVs1MDAwXSkudG9FcXVhbCh7IGlkOiA1MDAwLCB2YWx1ZTogMTAwMDAgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhbiB1cFxyXG4gICAgICBsYXJnZUFycmF5Lmxlbmd0aCA9IDA7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ01vY2sgYW5kIFNweSBTdXBwb3J0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IEplc3QgbW9ja3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tGdW5jdGlvbiA9IGplc3QuZm4oKTtcclxuICAgICAgbW9ja0Z1bmN0aW9uKCd0ZXN0IGFyZ3VtZW50Jyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9ja0Z1bmN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGV4cGVjdChtb2NrRnVuY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0IGFyZ3VtZW50Jyk7XHJcbiAgICAgIGV4cGVjdChtb2NrRnVuY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBzcHlpbmcgb24gb2JqZWN0cycsICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdE9iamVjdCA9IHtcclxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gJ29yaWdpbmFsJyxcclxuICAgICAgICBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZhbHVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKHRlc3RPYmplY3QsICdnZXRWYWx1ZScpO1xyXG4gICAgICBzcHkubW9ja1JldHVyblZhbHVlKCdtb2NrZWQnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0ZXN0T2JqZWN0LmdldFZhbHVlKCkpLnRvQmUoJ21vY2tlZCcpO1xyXG4gICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcblxyXG4gICAgICBzcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgICAgZXhwZWN0KHRlc3RPYmplY3QuZ2V0VmFsdWUoKSkudG9CZSgnb3JpZ2luYWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBtb2NrIGltcGxlbWVudGF0aW9ucycsICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrID0gamVzdC5mbigpO1xyXG4gICAgICBtb2NrQ2FsbGJhY2subW9ja0ltcGxlbWVudGF0aW9uKChuYW1lOiBzdHJpbmcpID0+IGBIZWxsbywgJHtuYW1lfSFgKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1vY2tDYWxsYmFjaygnV29ybGQnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnSGVsbG8sIFdvcmxkIScpO1xyXG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnV29ybGQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVHlwZVNjcmlwdCBGZWF0dXJlcycsICgpID0+IHtcclxuICAgIGludGVyZmFjZSBUZXN0SW50ZXJmYWNlIHtcclxuICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICB2YWx1ZTogbnVtYmVyO1xyXG4gICAgICBhY3RpdmU/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIGl0KCdzaG91bGQgd29yayB3aXRoIFR5cGVTY3JpcHQgaW50ZXJmYWNlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdERhdGE6IFRlc3RJbnRlcmZhY2UgPSB7XHJcbiAgICAgICAgbmFtZTogJ1Rlc3QgSXRlbScsXHJcbiAgICAgICAgdmFsdWU6IDEwMFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZXhwZWN0KHRlc3REYXRhLm5hbWUpLnRvQmUoJ1Rlc3QgSXRlbScpO1xyXG4gICAgICBleHBlY3QodGVzdERhdGEudmFsdWUpLnRvQmUoMTAwKTtcclxuICAgICAgZXhwZWN0KHRlc3REYXRhLmFjdGl2ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggZ2VuZXJpY3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNyZWF0ZUFycmF5ID0gPFQ+KGl0ZW1zOiBUW10pOiBUW10gPT4ge1xyXG4gICAgICAgIHJldHVybiBbLi4uaXRlbXNdO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbnVtYmVyQXJyYXkgPSBjcmVhdGVBcnJheShbMSwgMiwgM10pO1xyXG4gICAgICBjb25zdCBzdHJpbmdBcnJheSA9IGNyZWF0ZUFycmF5KFsnYScsICdiJywgJ2MnXSk7XHJcblxyXG4gICAgICBleHBlY3QobnVtYmVyQXJyYXkpLnRvRXF1YWwoWzEsIDIsIDNdKTtcclxuICAgICAgZXhwZWN0KHN0cmluZ0FycmF5KS50b0VxdWFsKFsnYScsICdiJywgJ2MnXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCB0eXBlIGd1YXJkcycsICgpID0+IHtcclxuICAgICAgY29uc3QgaXNTdHJpbmcgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBzdHJpbmcgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZXhwZWN0KGlzU3RyaW5nKCd0ZXN0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChpc1N0cmluZygxMjMpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGlzU3RyaW5nKG51bGwpKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vIFRlc3QgdGhlIHRlc3QgaHlnaWVuZSB1dGlsaXRpZXNcclxuZGVzY3JpYmUoJ1Rlc3QgSHlnaWVuZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcclxuICBpdCgnc2hvdWxkIHByb3ZpZGUgZGV0ZXJtaW5pc3RpYyByYW5kb20gZGF0YScsICgpID0+IHtcclxuICAgIC8vIFNpbmNlIHdlJ3ZlIG1vY2tlZCBNYXRoLnJhbmRvbSB3aXRoIGEgc2VlZCwgdGhpcyBzaG91bGQgYmUgZGV0ZXJtaW5pc3RpY1xyXG4gICAgY29uc3QgcmFuZG9tMSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICBjb25zdCByYW5kb20yID0gTWF0aC5yYW5kb20oKTtcclxuICAgIFxyXG4gICAgLy8gVmFsdWVzIHNob3VsZCBiZSBkaWZmZXJlbnQgYnV0IGRldGVybWluaXN0aWMgYWNyb3NzIHRlc3QgcnVuc1xyXG4gICAgZXhwZWN0KHJhbmRvbTEpLm5vdC50b0JlKHJhbmRvbTIpO1xyXG4gICAgZXhwZWN0KHR5cGVvZiByYW5kb20xKS50b0JlKCdudW1iZXInKTtcclxuICAgIGV4cGVjdCh0eXBlb2YgcmFuZG9tMikudG9CZSgnbnVtYmVyJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgaGF2ZSBjb25zaXN0ZW50IHRpbWVzdGFtcHMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0aW1lMSA9IERhdGUubm93KCk7XHJcbiAgICAvLyBBZHZhbmNlIHRpbWUgYnkgMTAwMG1zIHVzaW5nIG91ciB1dGlsaXR5XHJcbiAgICAvLyBOb3RlOiBhZHZhbmNlVGltZSBmdW5jdGlvbiB3b3VsZCBuZWVkIHRvIGJlIGltcG9ydGVkIGZyb20gdGVzdC1oeWdpZW5lXHJcbiAgICBjb25zdCB0aW1lMiA9IERhdGUubm93KCk7XHJcbiAgICBcclxuICAgIC8vIER1ZSB0byBvdXIgbW9ja2luZywgdGltZXMgc2hvdWxkIGJlIGNvbnNpc3RlbnRcclxuICAgIGV4cGVjdCh0aW1lMSkudG9CZSh0aW1lMik7XHJcbiAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==